DROP DATABASE IF EXISTS AssistantCalendar;

CREATE DATABASE AssistantCalendar;

USE AssistantCalendar;

CREATE TABLE Users (
    UserID INT PRIMARY KEY AUTO_INCREMENT, 
    Username VARCHAR(20) UNIQUE, 
    Password VARCHAR(255)
);

CREATE TABLE Event (
    EventID INT PRIMARY KEY AUTO_INCREMENT, 
    UserID INT,
    Name VARCHAR(20),
    Color VARCHAR(6),
    Note VARCHAR(100),
    Start DATE,
    End DATE,
    EventType VARCHAR(30),
    FOREIGN KEY (UserID) REFERENCES Users(UserID) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE Prompt (
    PromptID INT PRIMARY KEY AUTO_INCREMENT, 
    UserID INT,
    EventID INT,
    PromptText TEXT,
    FOREIGN KEY (UserID) REFERENCES Users(UserID) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (EventID) REFERENCES Event(EventID) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE Cache (
    Times DATE,
    EventID INT,
    UserID INT,
    PRIMARY KEY (Times, EventID),
    FOREIGN KEY (UserID) REFERENCES Users(UserID) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (EventID) REFERENCES Event(EventID) ON UPDATE CASCADE ON DELETE CASCADE
);
